{% import 'macros/form.html' as form %}
{% ckan_extends %}
{% block primary_content %}
  {% block content_blue_border %}
    <div class="page-header-blue-border-shadow extra-margin-main">
      {% block content_primary_nav %}
        <div class="page-header-nav-tabs-parent">
          <div class="left-side-inner">
            <div class="page-header-nav-tabs">
              {{ h.build_nav_icon(pkg.type ~ '_resource.edit', _('Edit resource'), id=pkg.name, resource_id=res.id, icon='pencil-square-o') }}
              {{ h.build_nav_icon(pkg.type ~ '_resource.views', _('Views'), id=pkg.name, resource_id=res.id, icon='bars') }}
            </div>
            <hr class="page-header-nav-tabs-hr">
          </div>
        </div>
      {% endblock %}
      <br>
      {% block page_primary_action %}
        <div class="dropdown btn-group" style="margin-bottom: 10px;">
          <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
            <i class="fa fa-plus-square"></i>
            {{ _('New view') }}
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            {% for option in h.get_allowed_view_types(resource, pkg_dict)  %}
              {% set url = h.url_for(pkg_dict.type ~ '_resource.edit_view', id=pkg_dict.name, resource_id=resource.id, view_type=option[0]) %}
              <li><a href="{{ url }}"><i class="fa fa-{{ option[2] }}"></i> {{ option[1] }}</a></li>
            {% endfor %}
          </ul>
          <br>
        </div>
        {% asset 'vendor/reorder' %}
      {% endblock %}

      {% block primary_content_inner %}
        {% if views %}
          {% snippet "package/snippets/resource_views_list.html", views=views, pkg=pkg, is_edit=true, extra_attributes='data-module = resource-view-reorder data-module-id=' + resource.id, extra_class='resource-view-list nav-pills nav-stacked' %}
        {% else %}
          <p class="empty">{{ _('This resource has no views') }}</p>
        {% endif %}
      {% endblock %}
    </div>
  {% endblock %}

{% endblock %}



