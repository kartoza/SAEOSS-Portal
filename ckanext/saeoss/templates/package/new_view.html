{% ckan_extends %}
{% block primary_content %}
  {% block content_blue_border %}
      <div class="page-header-blue-border-shadow extra-margin-main">
        {% block content_primary_nav %}
          <div class="page-header-nav-tabs-parent">
            <div class="left-side-inner">
              <div class="page-header-nav-tabs">
                <li class="active"><a href="#"><i class="fa fa-pencil-square-o"></i> {{ _('Add view') }}</a></li>
              </div>
              <hr class="page-header-nav-tabs-hr">
            </div>
            <div class="right-side-inner">
              <div class="main-edit-button-parent">
                {% block content_action %}
                  {% link_for _('All views'), named_route=pkg.type ~ '_resource.views', id=pkg.name, resource_id=res.id, class_='btn btn-default', icon='arrow-left' %}
                  {% if res %}
                    {% set url = h.url_for(pkg.type ~ '_resource.read', id=pkg.name, resource_id=res.id) ~ '?view_id=' ~ resource_view.id %}
                    <a href="{{ url }}" class="btn btn-default"><i class="fa fa-eye"></i> {{ _('View view') }}</a>
                  {% endif %}
                {% endblock %}
              </div>
            </div>
          </div>
          
        {% endblock %}
        <br>
        {% block primary_content_inner_header %}
          {% block form %}
          {% if resource_view.view_type == 'recline_view' and not datastore_available %}
            <p class="text-info">
              <i class="fa fa-info-circle"></i>
              {% trans %}
              Data Explorer views may be slow and unreliable unless the DataStore extension is enabled. For more information, please see the <a href='http://docs.ckan.org/en/latest/maintaining/data-viewer.html#viewing-structured-data-the-data-explorer' target='_blank'>Data Explorer documentation</a>.
              {% endtrans %}
            </p>
          {% endif %}

          <form class="dataset-form dataset-resource-form" method="post" data-module="basic-form resource-form">
            {% include 'package/snippets/view_form.html' %}
            <div class="form-actions">
                <button class="btn btn-default {% if not h.resource_view_display_preview(data) %}hide{%endif%}" name="preview" value="True" type="submit">{{ _('Preview') }}</button>
                <button class="btn btn-primary" name="save" value="Save" type="submit">{% block save_button_text %}{{ _('Add') }}{% endblock %}</button>
            </div>
          </form>
        {% endblock %}

        {% endblock %}
      </div>
      
  {% endblock %}

{% endblock %}



